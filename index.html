<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus Trade | Broker Portal</title>
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
    <style>
        :root { --bg: #0b0e11; --card: #1e2329; --text: #eaecef; --buy: #0ecb81; --sell: #f6465d; }
        body { background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; margin: 0; overflow: hidden; }
        
        /* Layout Grid */
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 300px 300px;
            grid-template-rows: 60px 1fr 250px;
            height: 100vh;
        }

        header { grid-column: span 3; background: var(--card); border-bottom: 1px solid #333; display: flex; align-items: center; padding: 0 20px; justify-content: space-between; }
        #chart-container { grid-row: 2; position: relative; border-right: 1px solid #333; }
        .order-book { grid-row: 2; background: var(--card); border-right: 1px solid #333; padding: 10px; font-size: 12px; }
        .trade-panel { grid-row: 2 / span 2; background: var(--card); padding: 20px; }
        .history { grid-column: span 2; background: var(--bg); border-top: 1px solid #333; padding: 15px; }

        /* Components */
        .price-row { display: flex; justify-content: space-between; margin-bottom: 4px; }
        .buy-btn { background: var(--buy); border: none; color: white; width: 100%; padding: 12px; border-radius: 4px; cursor: pointer; font-weight: bold; margin-bottom: 10px; }
        .sell-btn { background: var(--sell); border: none; color: white; width: 100%; padding: 12px; border-radius: 4px; cursor: pointer; font-weight: bold; }
        input { background: #2b3139; border: 1px solid #474d57; color: white; padding: 10px; width: 80%; border-radius: 4px; margin-bottom: 15px; }
    </style>
</head>
<body>

<div class="dashboard">
    <header>
        <div style="font-weight: bold; color: #fcd535;">NEXUS BROKER</div>
        <div id="live-price">BTC/USDT: $64,231.50</div>
        <div>Balance: 12,450.00 USDT</div>
    </header>

    <div id="chart-container"></div>

    <div class="order-book">
        <h4 style="margin-bottom: 10px;">Order Book</h4>
        <div id="asks" style="color: var(--sell);"></div>
        <div style="font-size: 18px; margin: 10px 0; text-align: center;">64,231.50</div>
        <div id="bids" style="color: var(--buy);"></div>
    </div>

    <div class="trade-panel">
        <h4>Spot Trading</h4>
        <p style="font-size: 12px; color: #848e9c;">Price</p>
        <input type="text" value="64231.50">
        <p style="font-size: 12px; color: #848e9c;">Amount (BTC)</p>
        <input type="number" placeholder="0.00">
        <button class="buy-btn">Buy BTC</button>
        <button class="sell-btn">Sell BTC</button>
    </div>

    <div class="history">
        <h4>Open Orders (0)</h4>
        <p style="color: #848e9c; font-size: 14px; text-align: center; margin-top: 50px;">No active orders found.</p>
    </div>
</div>

<script>
    // 1. Initialize Financial Chart
    const chart = LightweightCharts.createChart(document.getElementById('chart-container'), {
        layout: { backgroundColor: '#0b0e11', textColor: '#d1d4dc' },
        grid: { vertLines: { color: '#1e222d' }, horzLines: { color: '#1e222d' } },
        crosshair: { mode: LightweightCharts.CrosshairMode.Normal },
    });
    const lineSeries = chart.addLineSeries({ color: '#fcd535' });
    
    // Mock Data Loop
    let currentPrice = 64231;
    setInterval(() => {
        currentPrice += (Math.random() - 0.5) * 20;
        lineSeries.update({ time: Math.floor(Date.now() / 1000), value: currentPrice });
        document.getElementById('live-price').innerText = `BTC/USDT: $${currentPrice.toFixed(2)}`;
    }, 1000);

    // 2. Mock Order Book
    function updateOrderBook() {
        const bids = document.getElementById('bids');
        const asks = document.getElementById('asks');
        bids.innerHTML = asks.innerHTML = '';
        for(let i=0; i<8; i++) {
            asks.innerHTML += `<div class="price-row"><span>${(currentPrice + i*2).toFixed(1)}</span><span>${(Math.random()*2).toFixed(3)}</span></div>`;
            bids.innerHTML += `<div class="price-row"><span>${(currentPrice - i*2).toFixed(1)}</span><span>${(Math.random()*2).toFixed(3)}</span></div>`;
        }
    }
    setInterval(updateOrderBook, 2000);
</script>
</body>
</html>
